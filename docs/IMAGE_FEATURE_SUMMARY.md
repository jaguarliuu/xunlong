# ğŸ‰ å›¾ç‰‡åŠŸèƒ½å®ç°æ€»ç»“

## ğŸ“‹ å®ç°å†…å®¹

æœ¬æ¬¡æ›´æ–°æˆåŠŸä¸º XunLong é¡¹ç›®æ·»åŠ äº†å®Œæ•´çš„**æ–‡æ¡£é…å›¾**åŠŸèƒ½ï¼Œè§£å†³äº†ç”Ÿæˆçš„æŠ¥å‘Šç¼ºå°‘å›¾ç‰‡çš„ç—›ç‚¹ã€‚

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. å¯ç”¨ç°æœ‰å›¾ç‰‡é‡‡é›†åŠŸèƒ½

**æ–‡ä»¶**: `src/tools/web_searcher.py`

**æ”¹åŠ¨**:
- âœ… å¯ç”¨äº†è¢«ç¦ç”¨çš„å›¾ç‰‡é‡‡é›†åŠŸèƒ½
- âœ… ä»ç½‘é¡µä¸­æå–å›¾ç‰‡ï¼ˆå°ºå¯¸è¿‡æ»¤ï¼šâ‰¥200x200ï¼‰
- âœ… æ”¯æŒé…ç½®å¼€å…³æ§åˆ¶æ˜¯å¦é‡‡é›†å›¾ç‰‡
- âœ… é›†æˆ ImageProcessor è¿›è¡Œæ™ºèƒ½æ’å…¥

**å…³é”®ä»£ç **:
```python
self.extract_images = extract_images  # å¯é…ç½®
images = await self._extract_images_from_page(page, url)
```

---

### 2. åˆ›å»ºä¸“ç”¨å›¾ç‰‡æœç´¢å™¨

**æ–‡ä»¶**: `src/tools/image_searcher.py` â­ æ–°å»º

**åŠŸèƒ½**:
- âœ… é›†æˆ **Unsplash API** (5000æ¬¡/å°æ—¶å…è´¹)
- âœ… é›†æˆ **Pexels API** (æ— é™å…è´¹)
- âœ… æ”¯æŒæŒ‰å…³é”®è¯æœç´¢é«˜è´¨é‡å›¾ç‰‡
- âœ… æ”¯æŒå›¾ç‰‡æ–¹å‘é€‰æ‹©ï¼ˆæ¨ªå‘/çºµå‘/æ–¹å½¢ï¼‰
- âœ… æ‰¹é‡æœç´¢ï¼ˆä¸ºå¤šä¸ªç« èŠ‚å¹¶è¡Œæœç´¢ï¼‰

**æ ¸å¿ƒæ–¹æ³•**:
```python
async def search_images(query, count=5, orientation="landscape")
async def search_images_for_sections(sections, images_per_section=2)
```

---

### 3. åˆ›å»ºå›¾ç‰‡ä¸‹è½½ç®¡ç†å™¨

**æ–‡ä»¶**: `src/tools/image_downloader.py` â­ æ–°å»º

**åŠŸèƒ½**:
- âœ… å¼‚æ­¥å¹¶å‘ä¸‹è½½å›¾ç‰‡
- âœ… è‡ªåŠ¨å›¾ç‰‡ä¼˜åŒ–ï¼ˆå‹ç¼©ã€è°ƒæ•´å°ºå¯¸ï¼‰
- âœ… æœ¬åœ°ç¼“å­˜ï¼ˆé¿å…é‡å¤ä¸‹è½½ï¼‰
- âœ… æ”¯æŒä¸ºé¡¹ç›®åˆ›å»ºç‹¬ç«‹å›¾ç‰‡ç›®å½•
- âœ… å›¾ç‰‡æ ¼å¼ç»Ÿä¸€è½¬æ¢ä¸º JPEG

**ç‰¹æ€§**:
- å¹¶å‘æ§åˆ¶ï¼ˆé»˜è®¤5ä¸ªå¹¶å‘ï¼‰
- è‡ªåŠ¨å¤„ç† RGBA é€æ˜èƒŒæ™¯
- ä¿æŒå®½é«˜æ¯”ç¼©æ”¾
- MD5 å“ˆå¸Œå‘½åé¿å…å†²çª

**æ ¸å¿ƒæ–¹æ³•**:
```python
async def download_image(url, filename, optimize=True)
async def download_images(images, optimize=True)
async def download_for_project(project_id, images)
```

---

### 4. å¢å¼º ImageProcessor

**æ–‡ä»¶**: `src/utils/image_processor.py`

**æ”¹è¿›**:
- âœ… æ”¯æŒæœ¬åœ°è·¯å¾„ä¼˜å…ˆï¼ˆä¼˜å…ˆä½¿ç”¨ä¸‹è½½çš„æœ¬åœ°å›¾ç‰‡ï¼‰
- âœ… æ·»åŠ å›¾ç‰‡å…ƒæ•°æ®ï¼ˆæ‘„å½±å¸ˆã€æ¥æºã€å°ºå¯¸ï¼‰
- âœ… ç”Ÿæˆæ›´ä¸“ä¸šçš„å›¾ç‰‡ç”»å»Š
- âœ… æ”¯æŒæ‘„å½±å¸ˆç½²åé“¾æ¥

**æ’å…¥æ¨¡å¼**:
- `smart` - æ™ºèƒ½æ’å…¥ï¼ˆåŸºäºå†…å®¹ç›¸å…³æ€§ï¼‰â­ æ¨è
- `top` - é›†ä¸­åœ¨å¼€å¤´
- `bottom` - é™„å½•æ¨¡å¼
- `distribute` - å‡åŒ€åˆ†å¸ƒ
- `none` - ä¸æ’å…¥

---

### 5. é›†æˆåˆ°æŠ¥å‘Šç”Ÿæˆæµç¨‹

**æ–‡ä»¶**: `src/agents/report/report_coordinator.py`

**é›†æˆç‚¹**:
- âœ… Phase 3.6: æ·»åŠ é…å›¾é˜¶æ®µ
- âœ… ä¸ºæ¯ä¸ªç« èŠ‚æœç´¢ç›¸å…³å›¾ç‰‡
- âœ… ä¸‹è½½å›¾ç‰‡åˆ°é¡¹ç›®ç›®å½•
- âœ… æ’å…¥åˆ° Markdown æŠ¥å‘Šä¸­

**å·¥ä½œæµ**:
```
å¤§çº²ç”Ÿæˆ â†’ ç« èŠ‚å†™ä½œ â†’ è´¨é‡è¯„ä¼° â†’ æ•°æ®å¯è§†åŒ–
â†’ **é…å›¾æœç´¢å’Œä¸‹è½½** â†’ æŠ¥å‘Šç»„è£… â†’ å¯¼å‡º
```

**æ–°å¢å‚æ•°**:
```python
ReportCoordinator(
    enable_images=True  # æ§åˆ¶æ˜¯å¦å¯ç”¨å›¾ç‰‡
)
```

---

### 6. ç¯å¢ƒå˜é‡é…ç½®

**æ–‡ä»¶**: `.env.example`

**æ–°å¢é…ç½®**:
```bash
# Unsplash API (æ¨è)
UNSPLASH_ACCESS_KEY=your_key_here

# Pexels API (å¤‡é€‰)
PEXELS_API_KEY=your_key_here

# åŠŸèƒ½å¼€å…³
ENABLE_DOCUMENT_IMAGES=true
IMAGES_PER_SECTION=2
IMAGE_INSERT_MODE=smart
```

---

### 7. æµ‹è¯•ç”¨ä¾‹å’Œæ–‡æ¡£

**æ–‡ä»¶**:
- âœ… `examples/image_feature_test.py` - å®Œæ•´æµ‹è¯•å¥—ä»¶
- âœ… `docs/IMAGE_FEATURE_GUIDE.md` - è¯¦ç»†ä½¿ç”¨æŒ‡å—
- âœ… `requirements.txt` - æ·»åŠ  Pillow ä¾èµ–

**æµ‹è¯•è¦†ç›–**:
- å›¾ç‰‡æœç´¢ï¼ˆUnsplash/Pexelsï¼‰
- å›¾ç‰‡ä¸‹è½½å’Œä¼˜åŒ–
- å›¾ç‰‡æ’å…¥åˆ° Markdown
- æ‰¹é‡ç« èŠ‚å¤„ç†

---

## ğŸ¯ æŠ€æœ¯äº®ç‚¹

### 1. åŒé‡å›¾ç‰‡æ¥æºç­–ç•¥

```mermaid
graph LR
    A[éœ€è¦é…å›¾] --> B{APIå¯ç”¨?}
    B -->|æ˜¯| C[Unsplash/Pexels]
    B -->|å¦| D[ç½‘é¡µçˆ¬å–]
    C --> E[é«˜è´¨é‡é…å›¾]
    D --> F[ç›¸å…³å›¾ç‰‡]
    E --> G[ä¸‹è½½ä¼˜åŒ–]
    F --> G
    G --> H[æ™ºèƒ½æ’å…¥]
```

### 2. å›¾ç‰‡ä¼˜åŒ–ç®¡é“

```python
åŸå§‹å›¾ç‰‡ (å¯èƒ½å¾ˆå¤§)
    â†“
æ ¼å¼è½¬æ¢ (ç»Ÿä¸€ä¸ºJPEG)
    â†“
å°ºå¯¸è°ƒæ•´ (ä¿æŒæ¯”ä¾‹ï¼Œæœ€å¤§2048px)
    â†“
è´¨é‡å‹ç¼© (85%è´¨é‡)
    â†“
æœ¬åœ°å­˜å‚¨ (MD5å‘½å)
```

### 3. æ™ºèƒ½æ’å…¥ç®—æ³•

```python
def _smart_insert_images(content, images):
    """
    1. åˆ†æå›¾ç‰‡ alt æ–‡æœ¬
    2. æå–å…³é”®è¯
    3. åŒ¹é…ç›¸å…³æ®µè½
    4. åœ¨æ®µè½åæ’å…¥
    5. å‰©ä½™å›¾ç‰‡ä½œä¸ºé™„å½•
    """
```

---

## ğŸ“Š å®ç°ç»Ÿè®¡

| é¡¹ç›® | æ•°é‡ |
|------|------|
| æ–°å¢æ–‡ä»¶ | 4 ä¸ª |
| ä¿®æ”¹æ–‡ä»¶ | 4 ä¸ª |
| æ–°å¢ä»£ç è¡Œ | ~800 è¡Œ |
| æ–°å¢æ–¹æ³• | 20+ ä¸ª |
| API é›†æˆ | 2 ä¸ª |
| æµ‹è¯•ç”¨ä¾‹ | 4 ä¸ª |

---

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### æœ€ç®€å•çš„æ–¹å¼

```bash
# 1. é…ç½® API å¯†é’¥
echo "UNSPLASH_ACCESS_KEY=your_key" >> .env

# 2. ç”ŸæˆæŠ¥å‘Šï¼ˆè‡ªåŠ¨åŒ…å«é…å›¾ï¼‰
python xunlong.py report "äººå·¥æ™ºèƒ½å‘å±•è¶‹åŠ¿"
```

### ç¼–ç¨‹æ–¹å¼

```python
from src.agents.report import ReportCoordinator

coordinator = ReportCoordinator(
    llm_manager=llm_manager,
    enable_images=True  # å¯ç”¨é…å›¾
)

result = await coordinator.generate_report(
    query="AIæŠ€æœ¯åº”ç”¨",
    search_results=results
)
```

---

## ğŸ¨ æ•ˆæœå±•ç¤º

ç”Ÿæˆçš„æŠ¥å‘Šå°†åŒ…å«ï¼š

```markdown
## 2. æœºå™¨å­¦ä¹ åŸºç¡€

æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„æ ¸å¿ƒæŠ€æœ¯...

### æœºå™¨å­¦ä¹ åŸºç¡€ - é…å›¾

### 1. Machine Learning Algorithm Visualization
![Machine Learning](storage/project/images/abc123.jpg)
*å°ºå¯¸: 1920x1080 | æ‘„å½±å¸ˆ: [John Doe](https://unsplash.com/@johndoe) | æ¥æº: unsplash*

### 2. Neural Network Architecture
![Neural Network](storage/project/images/def456.jpg)
*å°ºå¯¸: 1600x900 | æ‘„å½±å¸ˆ: [Jane Smith](https://unsplash.com/@janesmith) | æ¥æº: unsplash*
```

---

## ğŸ’¡ è®¾è®¡å†³ç­–

### ä¸ºä»€ä¹ˆé€‰æ‹© Unsplash/Pexelsï¼Ÿ

âœ… **å…è´¹ä¸”é«˜è´¨é‡**
- Unsplash: ä¸“ä¸šæ‘„å½±ä½œå“
- Pexels: å¤šæ ·åŒ–å†…å®¹

âœ… **å•†ä¸šå‹å¥½**
- å¯å…è´¹å•†ç”¨
- æ— éœ€ä»˜è´¹è®¸å¯

âœ… **API ç¨³å®š**
- å®˜æ–¹ç»´æŠ¤
- æ–‡æ¡£å®Œå–„

### ä¸ºä»€ä¹ˆä¸‹è½½åˆ°æœ¬åœ°ï¼Ÿ

âœ… **é¿å…å¤–é“¾å¤±æ•ˆ**
- å›¾ç‰‡æ°¸ä¹…å¯ç”¨
- ä¸ä¾èµ–ç¬¬ä¸‰æ–¹

âœ… **åŠ è½½é€Ÿåº¦å¿«**
- æœ¬åœ°è®¿é—®æ›´å¿«
- ç¦»çº¿å¯ç”¨

âœ… **ä¾¿äºç®¡ç†**
- ç»Ÿä¸€å­˜å‚¨
- ç‰ˆæœ¬æ§åˆ¶

---

## ğŸ”„ åç»­ä¼˜åŒ–æ–¹å‘

### çŸ­æœŸ (1-2å‘¨)

- [ ] æ·»åŠ å›¾ç‰‡è´¨é‡è¯„åˆ†
- [ ] æ”¯æŒå›¾ç‰‡å»é‡
- [ ] ä¼˜åŒ–æœç´¢å…³é”®è¯æå–ï¼ˆä½¿ç”¨ LLMï¼‰

### ä¸­æœŸ (1ä¸ªæœˆ)

- [ ] é›†æˆæ›´å¤šå›¾ç‰‡æºï¼ˆPixabay, Getty Imagesï¼‰
- [ ] æ”¯æŒå›¾ç‰‡æ™ºèƒ½è£å‰ª
- [ ] æ·»åŠ å›¾ç‰‡ç¼“å­˜æ¸…ç†ç­–ç•¥

### é•¿æœŸ (2-3ä¸ªæœˆ)

- [ ] AI ç”Ÿæˆå›¾ç‰‡ï¼ˆDALL-E 3ï¼‰
- [ ] å›¾ç‰‡é£æ ¼ç»Ÿä¸€åŒ–
- [ ] è‡ªåŠ¨ç”Ÿæˆå›¾è¡¨å’Œæ•°æ®å¯è§†åŒ–

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [ä½¿ç”¨æŒ‡å—](./IMAGE_FEATURE_GUIDE.md) - è¯¦ç»†ä½¿ç”¨è¯´æ˜
- [API æ–‡æ¡£](./API_README.md) - API æ¥å£è¯´æ˜
- [æµ‹è¯•ç¤ºä¾‹](../examples/image_feature_test.py) - æµ‹è¯•ä»£ç 

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’ŒæœåŠ¡ï¼š

- [Unsplash](https://unsplash.com/) - é«˜è´¨é‡å…è´¹å›¾ç‰‡
- [Pexels](https://www.pexels.com/) - å…è´¹å›¾ç‰‡åº“
- [Pillow](https://python-pillow.org/) - å›¾ç‰‡å¤„ç†åº“
- [httpx](https://www.python-httpx.org/) - å¼‚æ­¥HTTPå®¢æˆ·ç«¯

---

**å®ç°æ—¶é—´**: 2025-10-07
**ç‰ˆæœ¬**: v1.0.0
**çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶æµ‹è¯•
